import{a as h,S as p,i as a}from"./assets/vendor-b11e2a50.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const E="44821264-a08a7741629af83990ada8b48",L="https://pixabay.com/api/",v=15,d=async(e,t=1)=>{try{const r=await h.get(L,{params:{key:E,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,page:t,per_page:v}});return{hits:r.data.hits,totalHits:r.data.totalHits}}catch{throw new Error("Failed to fetch images")}},m=e=>{const t=document.getElementById("gallery"),r=e.map(s=>`
      <a href="${s.largeImageURL}" class="gallery__item">
        <img src="${s.webformatURL}" alt="${s.tags}" class="gallery__image">
        <div class="gallery__info">
          <div>Likes: ${s.likes}</div>
          <div>Views: ${s.views}</div>
          <div>Comments: ${s.comments}</div>
          <div>Downloads: ${s.downloads}</div>
        </div>
      </a>
    `).join("");t.insertAdjacentHTML("beforeend",r),new p(".gallery a").refresh()},g=()=>{const e=document.querySelector(".loading");e.style.display="block"},u=()=>{const e=document.querySelector(".loading");e.style.display="none"},w=()=>{const e=document.getElementById("load-more");e.style.display="block"},y=()=>{const e=document.getElementById("load-more");e.style.display="none"},f=()=>{const e=document.getElementById("end-of-results-message");e.style.display="block",a.info({title:"Info",message:"We're sorry, but you've reached the end of search results."})},B=()=>{const e=document.getElementById("end-of-results-message");e.style.display="none"};let i=1,l="";const I=document.getElementById("search-form"),b=document.getElementById("load-more");I.addEventListener("submit",async e=>{if(e.preventDefault(),l=document.getElementById("search-input").value.trim(),i=1,!l){a.warning({title:"Warning",message:"Search query cannot be empty!"});return}g(),y(),B();try{const{hits:t,totalHits:r}=await d(l,i);document.getElementById("gallery").innerHTML="",m(t),t.length===0?a.error({title:"Error",message:"Sorry, there are no images matching your search query. Please try again!"}):r>t.length?w():r<=t.length&&f()}catch(t){a.error({title:"Error",message:t.message})}finally{u()}});b.addEventListener("click",async()=>{i+=1,g();try{const{hits:e,totalHits:t}=await d(l,i);m(e);const r=document.getElementById("gallery"),{height:s}=r.firstElementChild.getBoundingClientRect();window.scrollBy({top:s*2,behavior:"smooth"}),document.querySelectorAll(".gallery__item").length>=t&&(y(),f())}catch(e){a.error({title:"Error",message:e.message})}finally{u()}});
//# sourceMappingURL=commonHelpers.js.map
