{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44821264-a08a7741629af83990ada8b48';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport const fetchImages = async (query, page = 1) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: PER_PAGE,\n      },\n    });\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const renderImages = (images) => {\n  const gallery = document.getElementById('gallery');\n  const imageCards = images.map(image => {\n    return `\n      <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery__image\">\n        <div class=\"gallery__info\">\n          <div>Likes: ${image.likes}</div>\n          <div>Views: ${image.views}</div>\n          <div>Comments: ${image.comments}</div>\n          <div>Downloads: ${image.downloads}</div>\n        </div>\n      </a>\n    `;\n  }).join('');\n  \n  gallery.insertAdjacentHTML('beforeend', imageCards);\n  new SimpleLightbox('.gallery a').refresh();\n};\n\nexport const showLoading = () => {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'block';\n};\n\nexport const hideLoading = () => {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'none';\n};\n\nexport const showLoadMoreButton = () => {\n  const loadMoreButton = document.getElementById('load-more');\n  loadMoreButton.style.display = 'block';\n};\n\nexport const hideLoadMoreButton = () => {\n  const loadMoreButton = document.getElementById('load-more');\n  loadMoreButton.style.display = 'none';\n};\n\nexport const showEndOfResultsMessage = () => {\n  const message = document.getElementById('end-of-results-message');\n  message.style.display = 'block';\n  iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n};\n\nexport const hideEndOfResultsMessage = () => {\n  const message = document.getElementById('end-of-results-message');\n  message.style.display = 'none';\n};\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, showLoading, hideLoading, showLoadMoreButton, hideLoadMoreButton, showEndOfResultsMessage, hideEndOfResultsMessage } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst form = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  currentQuery = document.getElementById('search-input').value.trim();\n  currentPage = 1;\n\n  if (!currentQuery) {\n    iziToast.warning({ title: 'Warning', message: 'Search query cannot be empty!' });\n    return;\n  }\n\n  showLoading();\n  hideLoadMoreButton();\n  hideEndOfResultsMessage();\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n    document.getElementById('gallery').innerHTML = '';\n    renderImages(hits);\n\n    if (hits.length === 0) {\n      iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again!' });\n    } else if (totalHits > hits.length) {\n      showLoadMoreButton();\n    } else if (totalHits <= hits.length) {\n      showEndOfResultsMessage();\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    hideLoading();\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoading();\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n    renderImages(hits);\n\n    const gallery = document.getElementById('gallery');\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const totalLoadedImages = document.querySelectorAll('.gallery__item').length;\n    if (totalLoadedImages >= totalHits) {\n      hideLoadMoreButton();\n      showEndOfResultsMessage();\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    hideLoading();\n  }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","response","axios","renderImages","images","gallery","imageCards","image","SimpleLightbox","showLoading","loading","hideLoading","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","showEndOfResultsMessage","message","iziToast","hideEndOfResultsMessage","currentPage","currentQuery","form","event","hits","totalHits","error","cardHeight"],"mappings":"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"}