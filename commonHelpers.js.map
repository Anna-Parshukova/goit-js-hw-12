{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44821264-a08a7741629af83990ada8b48';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nlet page = 1;\nconst perPage = 15;\n\nexport const fetchImages = async (query) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n    page += 1;\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n};\n\nexport const resetPage = () => {\n  page = 1;\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const renderImages = (images) => {\n  const gallery = document.getElementById('gallery');\n\n  if (images.length === 0) {\n    iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again!' });\n    return;\n  }\n\n  const imageCards = images.map(image => {\n    return `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        <div>Likes: ${image.likes}</div>\n        <div>Views: ${image.views}</div>\n        <div>Comments: ${image.comments}</div>\n        <div>Downloads: ${image.downloads}</div>\n      </a>\n    `;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageCards);\n\n  new SimpleLightbox('.gallery a').refresh();\n};\n\nexport const showLoading = () => {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'block';\n};\n\nexport const hideLoading = () => {\n  const loading = document.querySelector('.loading');\n  loading.style.display = 'none';\n};\n\nexport const clearGallery = () => {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n};\n\nexport const hideLoadMoreButton = () => {\n  const loadMoreButton = document.getElementById('load-more');\n  loadMoreButton.style.display = 'none';\n};\n\nexport const showLoadMoreButton = () => {\n  const loadMoreButton = document.getElementById('load-more');\n  loadMoreButton.style.display = 'block';\n};","import { fetchImages, resetPage } from './js/pixabay-api';\nimport { renderImages, showLoading, hideLoading, clearGallery, hideLoadMoreButton, showLoadMoreButton } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentQuery = '';\nlet totalHits = 0;\nlet fetchedImages = 0;\n\nconst form = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = document.getElementById('search-input').value.trim();\n\n  if (!query) {\n    iziToast.warning({ title: 'Warning', message: 'Search query cannot be empty!' });\n    return;\n  }\n\n  if (query !== currentQuery) {\n    currentQuery = query;\n    resetPage();\n    clearGallery();\n    hideLoadMoreButton();\n    fetchedImages = 0; // Скидаємо лічильник завантажених зображень\n  }\n\n  showLoading();\n\n  try {\n    const data = await fetchImages(query);\n    totalHits = data.totalHits; // Зберігаємо загальну кількість зображень\n    fetchedImages += data.hits.length;\n    renderImages(data.hits);\n    if (fetchedImages >= totalHits) {\n      iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    hideLoading();\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  showLoading();\n\n  try {\n    const data = await fetchImages(currentQuery);\n    fetchedImages += data.hits.length;\n    renderImages(data.hits);\n    if (fetchedImages >= totalHits) {\n      iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    hideLoading();\n  }\n});"],"names":["API_KEY","BASE_URL","page","perPage","fetchImages","query","response","axios","resetPage","renderImages","images","gallery","iziToast","imageCards","image","SimpleLightbox","showLoading","loading","hideLoading","clearGallery","hideLoadMoreButton","loadMoreButton","showLoadMoreButton","currentQuery","totalHits","fetchedImages","form","event","data","error"],"mappings":"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"}